syntax = "proto3";

option go_package = "DistributedAuctionSystem/proto/proto";

message Bid {
    int32 client_id = 1;
    int32 bid_amount = 2;
}

message Acknowledgement {
    enum AckType {
        EXCEPTION = 0;
        FAIL = 1;
        SUCCESS = 2;
    }

    AckType type = 1;
}

message Result {
    int32 id = 1;
    int32 highest_bid = 2;
}

message Outcome {
    oneof OutcomeType {
        int32 highest_bid = 1;
        Result result = 2;
    }
}

message Empty {}

service Node {
    rpc TryBid(Bid) returns (Acknowledgement);
    rpc TryResult(Empty) returns (Outcome);
}

service Auction {
    rpc EvaluateBid(Bid) returns (Acknowledgement);
    rpc EvaluateResult(Empty) returns (Outcome);
}

